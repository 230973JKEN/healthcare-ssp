{% extends "base.html" %}
{% block content %}
<h1>Backup System</h1>
<h2>Create New Backup</h2>
<form action="{{ url_for('create_backup_route') }}" method="post">
    <div class="g-recaptcha" data-sitekey="6Ld0r4srAAAAAMQP_am7kD1ZWS73tiSdGt77cL0s"></div>
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <button type="submit">Create Backup Now</button>
</form>
<h2>Available Backups</h2>
{% if backups %}
    <table>
        <tr>
            <th>Backup File</th>
            <th>Actions</th>
        </tr>
        {% for backup in backups %}
        <tr>
            <td>{{ backup }}</td>
            <td>
                <form action="{{ url_for('restore_backup_route') }}" method="post" style="display: inline;">
                    <input type="hidden" name="backup_file" value="{{ backup }}">
                    <button type="submit">Restore</button>
                </form>
                <a href="{{ url_for('download_backup', filename=backup) }}">
                    <button>Download</button>
                </a>
            </td>
        </tr>
        {% endfor %}
    </table>
{% else %}
    <p>No backups available.</p>
{% endif %}
{% endblock %}